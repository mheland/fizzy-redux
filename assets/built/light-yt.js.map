{"version":3,"file":"light-yt.js","sources":["light-yt.js"],"sourcesContent":["/*\n * Light YouTube Embeds by @labnol\n * Credit: https://www.labnol.org/\n * Title from YT oauth by @kmhelander \n */\n\nfunction labnolIframe(div) {\n  var iframe = document.createElement('iframe');\n  iframe.setAttribute(\n    'src',\n    'https://www.youtube-nocookie.com/embed/' + div.dataset.id + '?autoplay=1&rel=0'  // No Cookie URL...\n  );\n  iframe.setAttribute('frameborder', '0');\n  iframe.setAttribute('allowfullscreen', '1');\n  iframe.setAttribute(\n    'allow',\n    'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'\n  );\n  div.parentNode.replaceChild(iframe, div);\n}\n\nfunction initYouTubeVideos() {\n  var playerElements = document.getElementsByClassName('youtube-player');\n  for (var n = 0; n < playerElements.length; n++) {\n    var videoId = playerElements[n].dataset.id;\n\n    let ytDataUrl = 'https://www.youtube-nocookie.com/oembed?format=json&url=http%3A//youtube.com/watch%3Fv%3D' + videoId;\n    \n    // fetch() is async, each player on page must have unique ID\n    let thisPlayerId = \"playerid-\" + n.toString();\n\n    // Fetch the JSON from Youtube and write the video title in TextNode element\n    fetch(ytDataUrl)\n    .then(res => res.json())\n    .then(out =>\n    document.getElementById(thisPlayerId).innerHTML = out.title.substr(0,40))\n    .catch(err => { console.log(err) });\n\n    // get the poster image in a IMG element\n    var div = document.createElement('div');\n    div.setAttribute('data-id', videoId);\n    var thumbNode = document.createElement('img');\n    thumbNode.src = '//i.ytimg.com/vi/ID/hqdefault.jpg'.replace(\n      'ID',\n      videoId\n    ); \n    div.appendChild(thumbNode);\n\n    // Create TextNode for title with CSS class videotitle\n    var videoTitle = document.createElement('div');\n    var titleNode = document.createTextNode('');\n    videoTitle.setAttribute('class', 'videotitle');\n    videoTitle.setAttribute('id', thisPlayerId);\n    videoTitle.appendChild(titleNode);\n    div.appendChild(videoTitle);\n\n    // Create the play button overlay on poster image\n    var playButton = document.createElement('div');\n    playButton.setAttribute('class', 'play plausible-event-name=VideoPlay');\n    div.appendChild(playButton);\n    div.onclick = function () {\n      labnolIframe(this);\n    };\n    playerElements[n].appendChild(div);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', initYouTubeVideos);\n"],"names":["labnolIframe","div","iframe","document","createElement","setAttribute","dataset","id","parentNode","replaceChild","initYouTubeVideos","playerElements","getElementsByClassName","n","length","videoId","ytDataUrl","let","thisPlayerId","toString","fetch","then","res","json","out","getElementById","innerHTML","title","substr","catch","err","console","log","thumbNode","videoTitle","src","replace","appendChild","titleNode","createTextNode","playButton","onclick","this","addEventListener"],"mappings":"AAMA,SAASA,aAAaC,GACpB,IAAIC,EAASC,SAASC,cAAc,QAAQ,EAC5CF,EAAOG,aACL,MACA,0CAA4CJ,EAAIK,QAAQC,GAAK,mBAC/D,EACAL,EAAOG,aAAa,cAAe,GAAG,EACtCH,EAAOG,aAAa,kBAAmB,GAAG,EAC1CH,EAAOG,aACL,QACA,yEACF,EACAJ,EAAIO,WAAWC,aAAaP,EAAQD,CAAG,CACzC,CAEA,SAASS,oBAEP,IADA,IAAIC,EAAiBR,SAASS,uBAAuB,gBAAgB,EAC5DC,EAAI,EAAGA,EAAIF,EAAeG,OAAQD,CAAC,GAAI,CAC9C,IAAIE,EAAUJ,EAAeE,GAAGP,QAAQC,GAEpCS,EAAY,4FAA8FD,EAG9GE,IAAIC,EAAe,YAAcL,EAAEM,SAAS,EAG5CC,MAAMJ,CAAS,EACdK,KAAKC,GAAOA,EAAIC,KAAK,CAAC,EACtBF,KAAKG,GACNrB,SAASsB,eAAeP,CAAY,EAAEQ,UAAYF,EAAIG,MAAMC,OAAO,EAAE,EAAE,CAAC,EACvEC,MAAMC,IAASC,QAAQC,IAAIF,CAAG,CAAE,CAAC,EAGlC,IAAI7B,EAAME,SAASC,cAAc,KAAK,EAElC6B,GADJhC,EAAII,aAAa,UAAWU,CAAO,EACnBZ,SAASC,cAAc,KAAK,GAQxC8B,GAPJD,EAAUE,IAAM,oCAAoCC,QAClD,KACArB,CACF,EACAd,EAAIoC,YAAYJ,CAAS,EAGR9B,SAASC,cAAc,KAAK,GACzCkC,EAAYnC,SAASoC,eAAe,EAAE,EAOtCC,GANJN,EAAW7B,aAAa,QAAS,YAAY,EAC7C6B,EAAW7B,aAAa,KAAMa,CAAY,EAC1CgB,EAAWG,YAAYC,CAAS,EAChCrC,EAAIoC,YAAYH,CAAU,EAGT/B,SAASC,cAAc,KAAK,GAC7CoC,EAAWnC,aAAa,QAAS,qCAAqC,EACtEJ,EAAIoC,YAAYG,CAAU,EAC1BvC,EAAIwC,QAAU,WACZzC,aAAa0C,IAAI,CACnB,EACA/B,EAAeE,GAAGwB,YAAYpC,CAAG,CACnC,CACF,CAEAE,SAASwC,iBAAiB,mBAAoBjC,iBAAiB"}